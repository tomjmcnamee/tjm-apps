{"ast":null,"code":"import _defineProperty from \"/Users/tommcnamee/Documents/Projects/tjm-apps/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nlet backendURL = \"http://localhost:3000/api/v1/\"; // let backendURL = \"http://wethepromo-backend.herokuapp.com/api/v1/\"\n// let backendURL = process.env.REACT_APP_FETCH_LOCATION\n\nfunction signUp(userInfo, history) {\n  return function (dispatch) {\n    fetch(backendURL + \"user\", {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\",\n        accepts: \"application/json\"\n      },\n      body: JSON.stringify({\n        user: userInfo\n      })\n    }).then(resp => resp.json()).then(response => {\n      if (response.errors) {\n        alert(response.errors);\n      } else {\n        localStorage.setItem(\"token\", response.token);\n        dispatch({\n          type: \"LOG USER IN\",\n          payload: response.userObj\n        });\n        dispatch({\n          type: \"SET USER ROLL SUM\",\n          payload: response.userRollSums\n        });\n        dispatch({\n          type: \"SET USER DICE ROLLS\",\n          payload: response.userDiceRolls\n        });\n        dispatch({\n          type: \"SET ALL ROLL SUM\",\n          payload: response.allRollSums\n        });\n        dispatch({\n          type: \"SET ALL DICE ROLLS\",\n          payload: response.allDiceRolls\n        });\n        history.push(\"/ShutTheBox\");\n      }\n    });\n  }; // Ends SignUp THUNK function\n} // ends SignUp funciton\n\n\nfunction logUserIn(accountCredentials, history) {\n  return function (dispatch) {\n    fetch(backendURL + \"login\", {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\",\n        accepts: \"application/json\"\n      },\n      body: JSON.stringify(accountCredentials)\n    }).then(resp => resp.json()).then(response => {\n      if (!!response.error) {\n        alert(\"incorrect email/password combination\");\n        history.push(\"/LogIn\");\n      } else {\n        localStorage.setItem(\"token\", response.token);\n        dispatch({\n          type: \"LOG USER IN\",\n          payload: response.userObj\n        });\n        dispatch({\n          type: \"SET USER ROLL SUM\",\n          payload: response.userRollSums\n        });\n        dispatch({\n          type: \"SET USER DICE ROLLS\",\n          payload: response.userDiceRolls\n        });\n        dispatch({\n          type: \"SET ALL ROLL SUM\",\n          payload: response.allRollSums\n        });\n        dispatch({\n          type: \"SET ALL DICE ROLLS\",\n          payload: response.allDiceRolls\n        });\n        history.push(\"/ShutTheBox\");\n      }\n    }).catch(error => {\n      console.log(\"Log Users In action Error - \", error);\n    });\n  };\n} // END LogUserIn function\n\n\nfunction autoLogIn(history) {\n  return function (dispatch) {\n    if (localStorage.token == undefined || localStorage.token == \"undefined\") {\n      fetch(backendURL + \"stb-guestrollhistory\").then(resp => resp.json()).then(response => {\n        if (response.status === \"error\") {// alert(\"incorrect email/password combination\")\n          // history.push(\"/LogIn\")\n        } else {\n          dispatch({\n            type: \"SET USER ROLL SUM\",\n            payload: response.userRollSums\n          });\n          dispatch({\n            type: \"SET USER DICE ROLLS\",\n            payload: response.userDiceRolls\n          });\n          dispatch({\n            type: \"SET ALL ROLL SUM\",\n            payload: response.allRollSums\n          });\n          dispatch({\n            type: \"SET ALL DICE ROLLS\",\n            payload: response.allDiceRolls\n          });\n        }\n      }).catch(error => {\n        console.log(\"autoLoginFETCHError\", error);\n      });\n    } else {\n      let token = localStorage.token;\n      fetch(backendURL + \"autologin\", {\n        method: \"GET\",\n        headers: {\n          \"content-type\": \"application/json\",\n          accepts: \"application/json\",\n          Authorization: \"\".concat(token)\n        }\n      }).then(resp => resp.json()).then(response => {\n        if (response.status === \"error\") {// alert(\"incorrect email/password combination\")\n          // history.push(\"/LogIn\")\n        } else {\n          dispatch({\n            type: \"AUTO LOG USER IN\",\n            payload: response.userObj\n          });\n          dispatch({\n            type: \"SET USER ROLL SUM\",\n            payload: response.userRollSums\n          });\n          dispatch({\n            type: \"SET USER DICE ROLLS\",\n            payload: response.userDiceRolls\n          });\n          dispatch({\n            type: \"SET ALL ROLL SUM\",\n            payload: response.allRollSums\n          });\n          dispatch({\n            type: \"SET ALL DICE ROLLS\",\n            payload: response.allDiceRolls\n          });\n        }\n      }).catch(error => {\n        console.log(\"autoLoginFETCHError\", error);\n      });\n    } // ends IF statement about localstorage.token\n\n  }; // ends Thunk middlewear function\n} // END AutoLogIn function\n\n\nfunction logOut(history) {\n  return function (dispatch) {\n    fetch(backendURL + \"stb-guestrollhistory\").then(resp => resp.json()).then(response => {\n      if (response.status === \"error\") {// alert(\"incorrect email/password combination\")\n        // history.push(\"/LogIn\")\n      } else {\n        dispatch({\n          type: \"SET USER ROLL SUM\",\n          payload: response.userRollSums\n        });\n        dispatch({\n          type: \"SET USER DICE ROLLS\",\n          payload: response.userDiceRolls\n        });\n        dispatch({\n          type: \"SET ALL ROLL SUM\",\n          payload: response.allRollSums\n        });\n        dispatch({\n          type: \"SET ALL DICE ROLLS\",\n          payload: response.allDiceRolls\n        });\n      }\n    }).catch(error => {\n      console.log(\"autoLoginFETCHError\", error);\n    });\n    dispatch({\n      type: \"LOG USER OUT\",\n      payload: {\n        first_name: \"Guest\",\n        id: 1\n      }\n    });\n    localStorage.removeItem(\"token\");\n    history.push(\"/shutthebox\");\n  }; // ends Thunk dispatch function\n} // ends logOut function\n\n\nfunction stb_RollSum(rollSum, gameRollSums, sessionRollSums, userRollSums, allRollSums) {\n  let number = \"\";\n\n  switch (rollSum) {\n    case 2:\n      number = \"two\";\n      break;\n\n    case 3:\n      number = \"three\";\n      break;\n\n    case 4:\n      number = \"four\";\n      break;\n\n    case 5:\n      number = \"five\";\n      break;\n\n    case 6:\n      number = \"six\";\n      break;\n\n    case 7:\n      number = \"seven\";\n      break;\n\n    case 8:\n      number = \"eight\";\n      break;\n\n    case 9:\n      number = \"nine\";\n      break;\n\n    case 10:\n      number = \"ten\";\n      break;\n\n    case 11:\n      number = \"eleven\";\n      break;\n\n    case 12:\n      number = \"twelve\";\n      break;\n  } // end switch\n\n\n  return function (dispatch) {\n    dispatch({\n      type: \"ADD GAME SUM\",\n      payload: {\n        [number]: gameRollSums[number] + 1,\n        totalRolls: gameRollSums[\"totalRolls\"] + 1\n      }\n    });\n    dispatch({\n      type: \"ADD SESSION SUM\",\n      payload: {\n        [number]: sessionRollSums[number] + 1,\n        totalRolls: sessionRollSums[\"totalRolls\"] + 1\n      }\n    });\n    dispatch({\n      type: \"ADD USER SUM\",\n      payload: {\n        [number]: userRollSums[number] + 1,\n        totalRolls: userRollSums[\"totalRolls\"] + 1\n      }\n    });\n    dispatch({\n      type: \"ADD ALL SUM\",\n      payload: {\n        [number]: allRollSums[number] + 1,\n        totalRolls: allRollSums[\"totalRolls\"] + 1\n      }\n    });\n  }; // Ends dispatch\n} // stb_RollSum\n\n\nfunction stb_DiceRoll(die1, die2, gameDiceRolls, sessionDiceRolls, userDiceRolls, allDiceRolls) {\n  return function (dispatch) {\n    let dienum1 = \"\";\n    let dienum2 = \"\";\n\n    switch (die1) {\n      case 1:\n        dienum1 = \"one\";\n        break;\n\n      case 2:\n        dienum1 = \"two\";\n        break;\n\n      case 3:\n        dienum1 = \"three\";\n        break;\n\n      case 4:\n        dienum1 = \"four\";\n        break;\n\n      case 5:\n        dienum1 = \"five\";\n        break;\n\n      case 6:\n        dienum1 = \"six\";\n        break;\n    } // ends die1 switch statement\n\n\n    if (die1 === die2) {\n      dispatch({\n        type: \"ADD GAME ROLL\",\n        payload: {\n          [dienum1]: gameDiceRolls[dienum1] + 2\n        }\n      });\n      dispatch({\n        type: \"ADD SESSION ROLL\",\n        payload: {\n          [dienum1]: sessionDiceRolls[dienum1] + 2\n        }\n      });\n      dispatch({\n        type: \"ADD USER ROLL\",\n        payload: {\n          [dienum1]: userDiceRolls[dienum1] + 2\n        }\n      });\n      dispatch({\n        type: \"ADD ALL ROLL\",\n        payload: {\n          [dienum1]: allDiceRolls[dienum1] + 2\n        }\n      });\n    } else {\n      switch (die2) {\n        case 1:\n          dienum2 = \"one\";\n          break;\n\n        case 2:\n          dienum2 = \"two\";\n          break;\n\n        case 3:\n          dienum2 = \"three\";\n          break;\n\n        case 4:\n          dienum2 = \"four\";\n          break;\n\n        case 5:\n          dienum2 = \"five\";\n          break;\n\n        case 6:\n          dienum2 = \"six\";\n          break;\n      } // ends Switch for dieNum2\n\n\n      dispatch({\n        type: \"ADD GAME ROLL\",\n        payload: {\n          [dienum1]: gameDiceRolls[dienum1] + 1,\n          [dienum2]: gameDiceRolls[dienum2] + 1\n        }\n      });\n      dispatch({\n        type: \"ADD SESSION ROLL\",\n        payload: {\n          [dienum1]: sessionDiceRolls[dienum1] + 1,\n          [dienum2]: sessionDiceRolls[dienum2] + 1\n        }\n      });\n      dispatch({\n        type: \"ADD USER ROLL\",\n        payload: {\n          [dienum1]: userDiceRolls[dienum1] + 1,\n          [dienum2]: userDiceRolls[dienum2] + 1\n        }\n      });\n      dispatch({\n        type: \"ADD ALL ROLL\",\n        payload: {\n          [dienum1]: allDiceRolls[dienum1] + 1,\n          [dienum2]: allDiceRolls[dienum2] + 1\n        }\n      });\n    } // ends ELSE\n\n  }; // Ends dispatch\n} // stb_DiceRoll\n\n\nfunction stb_commitLosingGameToHistory(userId, gameDiceRolls, gameDiceSums, die1, die2) {\n  let number = \"\";\n\n  switch (die1 + die2) {\n    case 2:\n      number = \"two\";\n      break;\n\n    case 3:\n      number = \"three\";\n      break;\n\n    case 4:\n      number = \"four\";\n      break;\n\n    case 5:\n      number = \"five\";\n      break;\n\n    case 6:\n      number = \"six\";\n      break;\n\n    case 7:\n      number = \"seven\";\n      break;\n\n    case 8:\n      number = \"eight\";\n      break;\n\n    case 9:\n      number = \"nine\";\n      break;\n\n    case 10:\n      number = \"ten\";\n      break;\n\n    case 11:\n      number = \"eleven\";\n      break;\n\n    case 12:\n      number = \"twelve\";\n      break;\n  }\n\n  let dienum1 = \"\";\n  let dienum2 = \"\";\n  let rolls = {};\n\n  switch (die1) {\n    case 1:\n      dienum1 = \"one\";\n      break;\n\n    case 2:\n      dienum1 = \"two\";\n      break;\n\n    case 3:\n      dienum1 = \"three\";\n      break;\n\n    case 4:\n      dienum1 = \"four\";\n      break;\n\n    case 5:\n      dienum1 = \"five\";\n      break;\n\n    case 6:\n      dienum1 = \"six\";\n      break;\n  } // ends die1 switch statement\n\n\n  if (die1 === die2) {\n    rolls = _objectSpread({}, gameDiceRolls, {\n      [dienum1]: gameDiceRolls[dienum1] + 2\n    });\n  } else {\n    switch (die2) {\n      case 1:\n        dienum2 = \"one\";\n        break;\n\n      case 2:\n        dienum2 = \"two\";\n        break;\n\n      case 3:\n        dienum2 = \"three\";\n        break;\n\n      case 4:\n        dienum2 = \"four\";\n        break;\n\n      case 5:\n        dienum2 = \"five\";\n        break;\n\n      case 6:\n        dienum2 = \"six\";\n        break;\n    } // ends Switch for Die2\n\n\n    rolls = _objectSpread({}, gameDiceRolls, {\n      [dienum1]: gameDiceRolls[dienum1] + 1,\n      [dienum2]: gameDiceRolls[dienum2] + 1\n    });\n  } /// ends ELSE statement\n\n\n  let sums = _objectSpread({}, gameDiceSums, {\n    [number]: gameDiceSums[number] + 1,\n    totalRolls: gameDiceSums[\"totalRolls\"] + 1\n  });\n\n  let game = {\n    wins: 0,\n    losses: 1\n  };\n  return function (dispatch) {\n    fetch(backendURL + \"stb-commitgame\", {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\",\n        accepts: \"application/json\"\n      },\n      body: JSON.stringify({\n        user_id: userId,\n        shut_the_box_game: game,\n        shut_the_box_dice_roll: rolls,\n        shut_the_box_roll_sum: sums\n      })\n    }).then(resp => resp.json()).then(response => {\n      if (response.errors) {\n        alert(response.errors);\n      } else {\n        console.log(response);\n        dispatch({\n          type: \"SET GAME SUM\",\n          payload: {\n            two: 0,\n            three: 0,\n            four: 0,\n            five: 0,\n            six: 0,\n            seven: 0,\n            eight: 0,\n            nine: 0,\n            ten: 0,\n            eleven: 0,\n            twelve: 0,\n            totalRolls: 0\n          }\n        });\n        dispatch({\n          type: \"SET GAME ROLL\",\n          payload: {\n            one: 0,\n            two: 0,\n            three: 0,\n            four: 0,\n            five: 0,\n            six: 0\n          }\n        });\n      }\n    });\n  }; // Ends stb_commitLosingGameToHistory THUNK function\n} // ends stb_commitLosingGameToHistory funciton\n\n\nfunction stb_commitWinningGameToHistory(userId, gameDiceRolls, gameDiceSums) {\n  let game = {\n    wins: 1,\n    losses: 0\n  };\n  return function (dispatch) {\n    fetch(backendURL + \"stb-commitgame\", {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\",\n        accepts: \"application/json\"\n      },\n      body: JSON.stringify({\n        user_id: userId,\n        shut_the_box_game: game,\n        shut_the_box_dice_roll: gameDiceRolls,\n        shut_the_box_roll_sum: gameDiceSums\n      })\n    }).then(resp => resp.json()).then(response => {\n      if (response.errors) {\n        alert(response.errors);\n      } else {\n        console.log(response);\n        dispatch({\n          type: \"SET GAME SUM\",\n          payload: {\n            two: 0,\n            three: 0,\n            four: 0,\n            five: 0,\n            six: 0,\n            seven: 0,\n            eight: 0,\n            nine: 0,\n            ten: 0,\n            eleven: 0,\n            twelve: 0,\n            totalRolls: 0\n          }\n        });\n        dispatch({\n          type: \"SET GAME ROLL\",\n          payload: {\n            one: 0,\n            two: 0,\n            three: 0,\n            four: 0,\n            five: 0,\n            six: 0\n          }\n        });\n      }\n    });\n  }; // Ends stb_commitWinningGameToHistory THUNK function\n} // ends stb_commitWinningGameToHistory funciton\n\n\nexport { signUp, logUserIn, autoLogIn, logOut, stb_RollSum, stb_DiceRoll, stb_commitLosingGameToHistory, stb_commitWinningGameToHistory };","map":{"version":3,"sources":["/Users/tommcnamee/Documents/Projects/tjm-apps/src/actions.js"],"names":["backendURL","signUp","userInfo","history","dispatch","fetch","method","headers","accepts","body","JSON","stringify","user","then","resp","json","response","errors","alert","localStorage","setItem","token","type","payload","userObj","userRollSums","userDiceRolls","allRollSums","allDiceRolls","push","logUserIn","accountCredentials","error","catch","console","log","autoLogIn","undefined","status","Authorization","logOut","first_name","id","removeItem","stb_RollSum","rollSum","gameRollSums","sessionRollSums","number","totalRolls","stb_DiceRoll","die1","die2","gameDiceRolls","sessionDiceRolls","dienum1","dienum2","stb_commitLosingGameToHistory","userId","gameDiceSums","rolls","sums","game","wins","losses","user_id","shut_the_box_game","shut_the_box_dice_roll","shut_the_box_roll_sum","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","one","stb_commitWinningGameToHistory"],"mappings":"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","sourcesContent":["\nlet backendURL = \"http://localhost:3000/api/v1/\"\n// let backendURL = \"http://wethepromo-backend.herokuapp.com/api/v1/\"\n// let backendURL = process.env.REACT_APP_FETCH_LOCATION\n\nfunction signUp (userInfo, history) {\n  return function (dispatch) {\n  fetch(backendURL + \"user\", {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/json\",\n      accepts: \"application/json\"\n    },\n    body: JSON.stringify({ user: userInfo })\n  })\n    .then(resp => resp.json())\n    .then(response => {\n      if (response.errors) {\n        alert(response.errors)\n      } else {\n        localStorage.setItem(\"token\", response.token)\n        dispatch({ type: \"LOG USER IN\", payload: response.userObj })\n        dispatch({ type: \"SET USER ROLL SUM\", payload: response.userRollSums })\n        dispatch({ type: \"SET USER DICE ROLLS\", payload: response.userDiceRolls })\n        dispatch({ type: \"SET ALL ROLL SUM\", payload: response.allRollSums })\n        dispatch({ type: \"SET ALL DICE ROLLS\", payload: response.allDiceRolls })\n        history.push(\"/ShutTheBox\")\n      }\n    })\n  }  // Ends SignUp THUNK function\n} // ends SignUp funciton\n\nfunction logUserIn (accountCredentials, history) {\n  return function (dispatch) {\n    fetch(backendURL + \"login\", {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\",\n        accepts: \"application/json\"\n      },\n      body: JSON.stringify(accountCredentials)\n    })\n    .then(resp => resp.json())\n    .then(response => {\n        if (!!response.error) {\n          alert(\"incorrect email/password combination\")\n          history.push(\"/LogIn\")\n        } else {\n          localStorage.setItem(\"token\", response.token)\n          dispatch({ type: \"LOG USER IN\", payload: response.userObj })\n          dispatch({ type: \"SET USER ROLL SUM\", payload: response.userRollSums })\n          dispatch({ type: \"SET USER DICE ROLLS\", payload: response.userDiceRolls })\n          dispatch({ type: \"SET ALL ROLL SUM\", payload: response.allRollSums })\n          dispatch({ type: \"SET ALL DICE ROLLS\", payload: response.allDiceRolls })   \n          history.push(\"/ShutTheBox\")\n        }\n      })\n      .catch((error) => {\n        console.log(\"Log Users In action Error - \", error)\n      });\n    }\n  } // END LogUserIn function\n\nfunction autoLogIn (history) {\n  return function (dispatch) {\n    if(localStorage.token == undefined || localStorage.token == \"undefined\"){\n      \n      fetch( backendURL + \"stb-guestrollhistory\")\n        .then(resp => resp.json())\n        .then(response => {\n          if (response.status === \"error\") {\n            // alert(\"incorrect email/password combination\")\n            // history.push(\"/LogIn\")\n          } else {\n            dispatch({ type: \"SET USER ROLL SUM\", payload: response.userRollSums })\n            dispatch({ type: \"SET USER DICE ROLLS\", payload: response.userDiceRolls })\n            dispatch({ type: \"SET ALL ROLL SUM\", payload: response.allRollSums })\n            dispatch({ type: \"SET ALL DICE ROLLS\", payload: response.allDiceRolls })            }\n      })\n      .catch((error) => {\n        console.log(\"autoLoginFETCHError\", error)\n      });\n    }else{\n      let token = localStorage.token\n      fetch( backendURL + \"autologin\", {\n        method: \"GET\",\n        headers: {\n          \"content-type\": \"application/json\",\n          accepts: \"application/json\",\n          Authorization: `${token}`\n        }\n      })\n        .then(resp => resp.json())\n        .then(response => {\n          if (response.status === \"error\") {\n            // alert(\"incorrect email/password combination\")\n            // history.push(\"/LogIn\")\n          } else {\n            dispatch({ type: \"AUTO LOG USER IN\", payload: response.userObj })\n            dispatch({ type: \"SET USER ROLL SUM\", payload: response.userRollSums })\n            dispatch({ type: \"SET USER DICE ROLLS\", payload: response.userDiceRolls })\n            dispatch({ type: \"SET ALL ROLL SUM\", payload: response.allRollSums })\n            dispatch({ type: \"SET ALL DICE ROLLS\", payload: response.allDiceRolls })            }\n      })\n      .catch((error) => {\n        console.log(\"autoLoginFETCHError\", error)\n      });\n    }// ends IF statement about localstorage.token\n  } // ends Thunk middlewear function\n} // END AutoLogIn function\n\n  function logOut (history) {\n    return function (dispatch) {\n      fetch( backendURL + \"stb-guestrollhistory\")\n        .then(resp => resp.json())\n        .then(response => {\n          if (response.status === \"error\") {\n            // alert(\"incorrect email/password combination\")\n            // history.push(\"/LogIn\")\n          } else {\n            dispatch({ type: \"SET USER ROLL SUM\", payload: response.userRollSums })\n            dispatch({ type: \"SET USER DICE ROLLS\", payload: response.userDiceRolls })\n            dispatch({ type: \"SET ALL ROLL SUM\", payload: response.allRollSums })\n            dispatch({ type: \"SET ALL DICE ROLLS\", payload: response.allDiceRolls })            }\n          })\n          .catch((error) => {\n            console.log(\"autoLoginFETCHError\", error)\n          });\n          \n      dispatch({ type: \"LOG USER OUT\", payload: { first_name: \"Guest\", id: 1}})\n      localStorage.removeItem(\"token\")\n      history.push(\"/shutthebox\")\n    } // ends Thunk dispatch function\n  } // ends logOut function\n\n\n\n\n\nfunction stb_RollSum(rollSum, gameRollSums, sessionRollSums, userRollSums, allRollSums) {\n  let number = \"\"\n  switch (rollSum) {\n    case 2: number = \"two\"\n      break;\n    case 3: number = \"three\"\n      break;\n    case 4: number = \"four\"\n        break;\n    case 5: number = \"five\"\n        break;\n    case 6: number = \"six\"\n      break;\n    case 7: number = \"seven\"\n      break;\n    case 8: number = \"eight\"\n        break;\n    case 9: number = \"nine\"\n        break;\n    case 10: number = \"ten\"\n        break;\n    case 11: number = \"eleven\"\n        break;\n    case 12: number = \"twelve\"\n      break;\n    } // end switch\n    return function (dispatch) {  \n      dispatch({ type: \"ADD GAME SUM\", payload: {[number]: gameRollSums[number]+1, totalRolls: gameRollSums[\"totalRolls\"]+1} })\n      dispatch({ type: \"ADD SESSION SUM\", payload: {[number]: sessionRollSums[number]+1, totalRolls: sessionRollSums[\"totalRolls\"]+1} })\n      dispatch({ type: \"ADD USER SUM\", payload: {[number]: userRollSums[number]+1, totalRolls: userRollSums[\"totalRolls\"]+1} })\n      dispatch({ type: \"ADD ALL SUM\", payload: {[number]: allRollSums[number]+1, totalRolls: allRollSums[\"totalRolls\"]+1} })\n    }// Ends dispatch\n} // stb_RollSum\n\n\nfunction stb_DiceRoll(die1, die2, gameDiceRolls, sessionDiceRolls, userDiceRolls, allDiceRolls) {\nreturn function (dispatch) { \n  let dienum1 = \"\"\n  let dienum2 = \"\"\n  switch (die1) {\n    case 1: dienum1 = \"one\"\n      break;\n    case 2: dienum1 = \"two\"\n      break;\n    case 3: dienum1 = \"three\"\n      break;\n    case 4: dienum1 = \"four\"\n      break;\n    case 5: dienum1 = \"five\"\n      break;\n    case 6: dienum1 = \"six\"\n      break;\n  } // ends die1 switch statement\n  if (die1 === die2) {\n    dispatch({ type: \"ADD GAME ROLL\", payload: {[dienum1]: gameDiceRolls[dienum1]+2} })\n    dispatch({ type: \"ADD SESSION ROLL\", payload: {[dienum1]: sessionDiceRolls[dienum1]+2} })\n    dispatch({ type: \"ADD USER ROLL\", payload: {[dienum1]: userDiceRolls[dienum1]+2} })\n    dispatch({ type: \"ADD ALL ROLL\", payload: {[dienum1]: allDiceRolls[dienum1]+2} })\n  }  else {\n    switch (die2) {\n      case 1: dienum2 = \"one\"\n        break;\n      case 2: dienum2 = \"two\"\n        break;\n      case 3: dienum2 = \"three\"\n        break;\n      case 4: dienum2 = \"four\"\n        break;\n      case 5: dienum2 = \"five\"\n        break;\n      case 6: dienum2 = \"six\"\n        break;\n    } // ends Switch for dieNum2\n    dispatch({ type: \"ADD GAME ROLL\", payload: {[dienum1]: gameDiceRolls[dienum1]+1, [dienum2]: gameDiceRolls[dienum2]+1} })\n    dispatch({ type: \"ADD SESSION ROLL\", payload: {[dienum1]: sessionDiceRolls[dienum1]+1, [dienum2]: sessionDiceRolls[dienum2]+1} })\n    dispatch({ type: \"ADD USER ROLL\", payload: {[dienum1]: userDiceRolls[dienum1]+1, [dienum2]: userDiceRolls[dienum2]+1} })\n    dispatch({ type: \"ADD ALL ROLL\", payload: {[dienum1]: allDiceRolls[dienum1]+1, [dienum2]: allDiceRolls[dienum2]+1} })\n  } // ends ELSE\n  \n  }// Ends dispatch\n} // stb_DiceRoll\n\n\n\nfunction stb_commitLosingGameToHistory (userId, gameDiceRolls, gameDiceSums, die1, die2) {\n  let number = \"\"\n  switch(die1 + die2) {\n    case 2: number = \"two\"\n      break;\n    case 3: number = \"three\"\n      break;\n    case 4: number = \"four\"\n      break;\n    case 5: number = \"five\"\n      break;\n    case 6: number = \"six\"\n      break;\n    case 7: number = \"seven\"\n      break;\n    case 8: number = \"eight\"\n      break;\n    case 9: number = \"nine\"\n      break;\n    case 10: number = \"ten\"\n      break;\n    case 11: number = \"eleven\"\n      break;\n    case 12: number = \"twelve\"\n      break;\n  }\n\n  let dienum1 = \"\"\n  let dienum2 = \"\"\n  let rolls = {}\n  switch (die1) {\n    case 1: dienum1 = \"one\"\n      break;\n    case 2: dienum1 = \"two\"\n      break;\n    case 3: dienum1 = \"three\"\n      break;\n    case 4: dienum1 = \"four\"\n      break;\n    case 5: dienum1 = \"five\"\n      break;\n    case 6: dienum1 = \"six\"\n      break;\n  } // ends die1 switch statement\n  if (die1 === die2) {\n    rolls = {...gameDiceRolls, [dienum1]: gameDiceRolls[dienum1] + 2}\n  }  else {\n    switch (die2) {\n      case 1: dienum2 = \"one\"\n        break;\n      case 2: dienum2 = \"two\"\n        break;\n      case 3: dienum2 = \"three\"\n        break;\n      case 4: dienum2 = \"four\"\n        break;\n      case 5: dienum2 = \"five\"\n        break;\n      case 6: dienum2 = \"six\"\n        break;\n      } // ends Switch for Die2\n      rolls = {...gameDiceRolls, [dienum1]: gameDiceRolls[dienum1] + 1, [dienum2]: gameDiceRolls[dienum2] + 1}\n  } /// ends ELSE statement\n\n  let sums = {...gameDiceSums, [number]: gameDiceSums[number] + 1, totalRolls: gameDiceSums[\"totalRolls\"] + 1}\n  let game = {wins: 0, losses: 1}\n  return function (dispatch) {\n  fetch(backendURL + \"stb-commitgame\", {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/json\",\n      accepts: \"application/json\"\n    },\n    body: JSON.stringify({ user_id: userId, shut_the_box_game: game, shut_the_box_dice_roll: rolls, shut_the_box_roll_sum: sums })\n  })\n    .then(resp => resp.json())\n    .then(response => {\n      if (response.errors) {\n        alert(response.errors)\n      } else {\n        console.log(response)\n        dispatch({ type: \"SET GAME SUM\", payload: {two: 0,three: 0,four: 0,five: 0,six: 0,seven: 0,eight: 0,nine: 0,ten: 0,eleven: 0,twelve: 0,totalRolls: 0} })\n        dispatch({ type: \"SET GAME ROLL\", payload: { one: 0,two: 0,three: 0,four: 0,five: 0,six: 0 } })\n      }\n    })\n  }  // Ends stb_commitLosingGameToHistory THUNK function\n} // ends stb_commitLosingGameToHistory funciton\n\n\nfunction stb_commitWinningGameToHistory (userId, gameDiceRolls, gameDiceSums) {\n  let game = {wins: 1, losses: 0}\n  return function (dispatch) {\n  fetch(backendURL + \"stb-commitgame\", {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/json\",\n      accepts: \"application/json\"\n    },\n    body: JSON.stringify({ user_id: userId, shut_the_box_game: game, shut_the_box_dice_roll: gameDiceRolls, shut_the_box_roll_sum: gameDiceSums })\n  })\n    .then(resp => resp.json())\n    .then(response => {\n      if (response.errors) {\n        alert(response.errors)\n      } else {\n        console.log(response)\n        dispatch({ type: \"SET GAME SUM\", payload: {two: 0,three: 0,four: 0,five: 0,six: 0,seven: 0,eight: 0,nine: 0,ten: 0,eleven: 0,twelve: 0,totalRolls: 0} })\n        dispatch({ type: \"SET GAME ROLL\", payload: { one: 0,two: 0,three: 0,four: 0,five: 0,six: 0 } })\n      }\n    })\n  }  // Ends stb_commitWinningGameToHistory THUNK function\n} // ends stb_commitWinningGameToHistory funciton\n\n\n\nexport { \n  signUp,\n  logUserIn,\n  autoLogIn,\n  logOut,\n  stb_RollSum,\n  stb_DiceRoll,\n  stb_commitLosingGameToHistory,\n  stb_commitWinningGameToHistory,\n}"]},"metadata":{},"sourceType":"module"}